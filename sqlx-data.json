{
  "db": "PostgreSQL",
  "1865b3d999479dae0bdefba6c319676454197521a30842d58fbd4ee98af167c6": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "\n        DELETE FROM pinpoints\n        WHERE id = $1;\n        "
  },
  "3592b12eb8282e57fe908b905e1db96cb709b4ebd0d1c44dea67c41c29b17928": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Text"
        ]
      }
    },
    "query": "\n        WITH usr_pin(pinpoint_id) AS\n        (\n            SELECT pinpoint_id\n            FROM user_pinpoints\n            WHERE user_id IN (SELECT id FROM users WHERE username = $1)\n        )\n        DELETE FROM pinpoints\n        WHERE id IN (SELECT pinpoint_id FROM usr_pin);\n        "
  },
  "7f0a36afb69b79f9f1a6c87f718356e85d2612670bda10c9e335d124eae73cea": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Text",
          "Text",
          "Text",
          "Text",
          "Int4"
        ]
      }
    },
    "query": "WITH usr AS\n            (INSERT INTO users (id, email, username, phash, salt)\n            VALUES ($1, $2, $3, $4, $5) RETURNING id)\n            INSERT INTO user_roles (user_id, role_id)\n            SELECT id, $6 FROM usr; "
  },
  "873d58f788c03f6f9c36311c485826b9ca819beea30ac928c49181a773f0dda1": {
    "describe": {
      "columns": [
        {
          "name": "unique_id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "email",
          "ordinal": 1,
          "type_info": "Text"
        },
        {
          "name": "username",
          "ordinal": 2,
          "type_info": "Text"
        },
        {
          "name": "phash",
          "ordinal": 3,
          "type_info": "Text"
        },
        {
          "name": "salt",
          "ordinal": 4,
          "type_info": "Text"
        },
        {
          "name": "role_id",
          "ordinal": 5,
          "type_info": "Int4"
        },
        {
          "name": "role_title",
          "ordinal": 6,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      }
    },
    "query": "SELECT usr.id AS unique_id,\n        usr.email as email,\n        usr.username as username,\n        usr.phash as phash,\n        usr.salt as salt,\n        rls.id as role_id,\n        rls.title as role_title\n        FROM users usr\n        INNER JOIN user_roles usr_rls ON usr.id = usr_rls.user_id\n        INNER JOIN roles rls ON rls.id = usr_rls.role_id\n        WHERE usr.username = $1; "
  },
  "8ce4fbb3ef57e64189b53fa6aa28534cfb1eb24ff794bee856bfe01d8c711abb": {
    "describe": {
      "columns": [
        {
          "name": "unique_id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "email",
          "ordinal": 1,
          "type_info": "Text"
        },
        {
          "name": "username",
          "ordinal": 2,
          "type_info": "Text"
        },
        {
          "name": "phash",
          "ordinal": 3,
          "type_info": "Text"
        },
        {
          "name": "salt",
          "ordinal": 4,
          "type_info": "Text"
        },
        {
          "name": "role_id",
          "ordinal": 5,
          "type_info": "Int4"
        },
        {
          "name": "role_title",
          "ordinal": 6,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      }
    },
    "query": "SELECT usr.id AS unique_id,\n        usr.email as email,\n        usr.username as username,\n        usr.phash as phash,\n        usr.salt as salt,\n        rls.id as role_id,\n        rls.title as role_title\n        FROM users usr\n        INNER JOIN user_roles usr_rls ON usr.id = usr_rls.user_id\n        INNER JOIN roles rls ON rls.id = usr_rls.role_id\n        WHERE usr.email = $1; "
  },
  "993ccdb64c305f0fea9e58a68b23aedaa6fe8a8fc3a44782d9b9bf6c5c6718f1": {
    "describe": {
      "columns": [
        {
          "name": "unique_id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "email",
          "ordinal": 1,
          "type_info": "Text"
        },
        {
          "name": "username",
          "ordinal": 2,
          "type_info": "Text"
        },
        {
          "name": "phash",
          "ordinal": 3,
          "type_info": "Text"
        },
        {
          "name": "salt",
          "ordinal": 4,
          "type_info": "Text"
        },
        {
          "name": "role_id",
          "ordinal": 5,
          "type_info": "Int4"
        },
        {
          "name": "role_title",
          "ordinal": 6,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "SELECT usr.id AS unique_id,\n        usr.email as email,\n        usr.username as username,\n        usr.phash as phash,\n        usr.salt as salt,\n        rls.id as role_id,\n        rls.title as role_title\n        FROM users usr\n        INNER JOIN user_roles usr_rls ON usr.id = usr_rls.user_id\n        INNER JOIN roles rls ON rls.id = usr_rls.role_id\n        WHERE usr.id = $1; "
  },
  "9c4fb702279719c6c43cfa7c3f54279ebed0c48123af43a6b47bdfef202ed58a": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "phash",
          "ordinal": 1,
          "type_info": "Text"
        },
        {
          "name": "salt",
          "ordinal": 2,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      }
    },
    "query": "\n        SELECT u.id, u.phash, u.salt\n        FROM users u\n        WHERE u.username = $1\n        "
  },
  "a87af32bb735816458e742cbfd3541c73931ac996942d4b483fcd59bad98ee90": {
    "describe": {
      "columns": [
        {
          "name": "pinpoint_id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "latitude",
          "ordinal": 1,
          "type_info": "Float8"
        },
        {
          "name": "longitude",
          "ordinal": 2,
          "type_info": "Float8"
        },
        {
          "name": "added_at",
          "ordinal": 3,
          "type_info": "Timestamptz"
        },
        {
          "name": "contents_id",
          "ordinal": 4,
          "type_info": "Uuid"
        },
        {
          "name": "description",
          "ordinal": 5,
          "type_info": "Text"
        },
        {
          "name": "attachment",
          "ordinal": 6,
          "type_info": "Bytea"
        },
        {
          "name": "user_id",
          "ordinal": 7,
          "type_info": "Uuid"
        },
        {
          "name": "username",
          "ordinal": 8,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        true,
        true,
        false,
        false,
        true,
        true,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Float8",
          "Float8",
          "Float8",
          "Float8"
        ]
      }
    },
    "query": "SELECT pin.id AS pinpoint_id, pin.latitude AS latitude, pin.longitude as longitude,\n        pin.added_at AS added_at,\n        con.id AS contents_id,\n        con.description AS description,\n        con.attachment AS attachment,\n        usr.id AS user_id,\n        usr.username AS username\n        FROM pinpoints pin\n        INNER JOIN pinpoint_contents pin_con on pin_con.pinpoint_id = pin.id\n        INNER JOIN contents con ON con.id = pin_con.content_id\n        INNER JOIN user_pinpoints usr_pin ON usr_pin.pinpoint_id = pin.id\n        INNER JOIN users usr ON usr_pin.user_id = usr.id\n        WHERE pin.latitude > $1 AND pin.latitude < $2\n        AND pin.longitude > $3 AND pin.longitude < $4 "
  },
  "b0798387d55f068fb21f06359b66e6595e820cda619b284dfbce50fdd422f880": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Text"
        ]
      }
    },
    "query": "\n        DELETE FROM users\n        WHERE username = $1;\n        "
  },
  "dc8b5bc0a06b10823bf0a46e6784b1dd4fbfad72627cb3405138e22d957bfa80": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "\n        DELETE FROM pinpoint_contents\n        WHERE pinpoint_id = $1;\n        "
  },
  "f3705ca96f48e5fc06b849454fd17adffde5db77d46d8e1e984910e057ece861": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Float8",
          "Float8",
          "Uuid",
          "Text",
          "Bytea",
          "Text"
        ]
      }
    },
    "query": "\nWITH pin AS (\nINSERT INTO pinpoints (id, latitude, longitude)\nVALUES ($1, $2, $3)\nRETURNING id\n),\ncon as (\n    INSERT INTO contents (id, description, attachment)\n    VALUES($4, $5, $6)\n    RETURNING id\n),\nusr_pin as (\n    INSERT INTO user_pinpoints (pinpoint_id, user_id)\n    SELECT id, (SELECT id FROM users WHERE username = $7) FROM pin\n)\nINSERT INTO pinpoint_contents (pinpoint_id, content_id)\nSELECT pin.id, con.id FROM pin, con\n        "
  }
}